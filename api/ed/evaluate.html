<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Edward – ed.evaluate</title>
  <!-- Mobile Specific Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT -->
  <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="/css/normalize.css">
  <link rel="stylesheet" href="/css/skeleton.css">
  <!-- Dynamically resize logo for mobile -->
  <style type="text/css">
  .logo-width {
    width: 100%;
    box-sizing: border-box;
    margin-bottom: 15%;
  }
  /* Roughly the point when website is single column */
  @media (max-width: 850px) {
    .logo-width {
      width: 50%;
      box-sizing: border-box;
      margin-bottom: 5%;
    }
  }
  /* Downgrade API's header styles without explicitly modifying their type. */
  div.nine.columns h1 { text-align: left; }
  div.nine.columns h1 { font-size: 3.0rem; line-height: 1.25; letter-spacing: -.1rem; }
  div.nine.columns h2 { font-size: 2.4rem; line-height: 1.3;  letter-spacing: -.1rem; }
  div.nine.columns h3 { font-size: 2.4rem; line-height: 1.35; letter-spacing: -.08rem; }
  div.nine.columns h4 { font-size: 1.8rem; line-height: 1.5;  letter-spacing: -.05rem; }
  div.nine.columns h5 { font-size: 1.5rem; line-height: 1.6;  letter-spacing: 0; }
  @media (min-width: 550px) {
    div.nine.columns h1 { font-size: 3.6rem; }
    div.nine.columns h2 { font-size: 3.0rem; }
    div.nine.columns h3 { font-size: 3.0rem; }
    div.nine.columns h4 { font-size: 2.5rem; }
    div.nine.columns h5 { font-size: 1.5rem; }
  }
  </style>

  <!-- KaTeX -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js"></script>

  <!-- highlight.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/highlight.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/styles/github.min.css">

  <!-- Favicon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="/icons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/icons/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="/icons/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/icons/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/icons/manifest.json">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" href="/icons/favicon.ico">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-TileImage" content="/icons/mstile-144x144.png">
  <meta name="msapplication-config" content="/icons/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">
</head>
<body>
<div class="container">
  <div class="row" style="margin-top: 5%">
    <div class="three columns">
    <h1><a href="/">Edward</a></h1>
    <a href="/">
    <center>
      <img src="/images/edward.png" class="logo-width" alt="Edward" />
    </center>
    </a>
    <a class="button u-full-width" href="/api/">API</a>
    <hr style="margin-top: 1rem; margin-bottom: 1.5rem;"/>
    <a class="button u-full-width" href="/api/reference">Reference</a>
    <a class="button u-full-width" href="/api/ed/criticisms">ed.criticisms</a>
<a class="button u-full-width" href="/api/ed/inferences">ed.inferences</a>
<a class="button u-full-width" href="/api/ed/models">ed.models</a>
<a class="button u-full-width" href="/api/ed/util">ed.util</a>
<a class="button u-full-width" href="/api/observations">observations</a>

    <div class="row" style="padding-bottom: 5%"> </div>
    <a class="button2 u-pull-right" style="padding-right:10%"
      href="https://github.com/blei-lab/edward">
      <span style="vertical-align:middle;">Github</span>&nbsp;
      <img src="/images/github-mark.svg" style="vertical-align:middle;"
      alt="Edward on Github" />
    </a>
    <div class="row" style="padding-bottom: 5%"> </div>
    </div>
    <div class="nine columns">

<div itemscope itemtype="http://developers.google.com/ReferenceObject">
<meta itemprop="name" content="ed.evaluate" />
</div>
<h1 id="ed.evaluate">ed.evaluate</h1>
<h3 id="aliases">Aliases:</h3>
<ul>
<li><code>ed.criticisms.evaluate</code></li>
<li><code>ed.evaluate</code></li>
</ul>
<pre class="python"><code>evaluate(
    metrics,
    data,
    n_samples=500,
    output_key=None,
    seed=None
)</code></pre>
<p>Defined in <a href="https://github.com/blei-lab/edward/tree/master/edward/criticisms/evaluate.py"><code>edward/criticisms/evaluate.py</code></a>.</p>
<p>Evaluate fitted model using a set of metrics.</p>
<p>A metric, or scoring rule <span class="citation" data-cites="winkler1994evaluating">(Winkler, 1994)</span>, is a function of observed data under the posterior predictive distribution. For example in supervised metrics such as classification accuracy, the observed data (true output) is compared to the posterior predictive’s mean (predicted output). In unsupervised metrics such as log-likelihood, the probability of observing the data is calculated under the posterior predictive’s log-density.</p>
<h4 id="args">Args:</h4>
<ul>
<li><b><code>metrics</code></b>: list of str and/or (str, params: dict) tuples, str, or (str, params: dict) tuple. List of metrics or a single metric: <code>'binary_accuracy'</code>, <code>'categorical_accuracy'</code>, <code>'sparse_categorical_accuracy'</code>, <code>'log_loss'</code> or <code>'binary_crossentropy'</code>, <code>'categorical_crossentropy'</code>, <code>'sparse_categorical_crossentropy'</code>, <code>'hinge'</code>, <code>'squared_hinge'</code>, <code>'mse'</code> or <code>'MSE'</code> or <code>'mean_squared_error'</code>, <code>'mae'</code> or <code>'MAE'</code> or <code>'mean_absolute_error'</code>, <code>'mape'</code> or <code>'MAPE'</code> or <code>'mean_absolute_percentage_error'</code>, <code>'msle'</code> or <code>'MSLE'</code> or <code>'mean_squared_logarithmic_error'</code>, <code>'poisson'</code>, <code>'cosine'</code> or <code>'cosine_proximity'</code>, <code>'log_lik'</code> or <code>'log_likelihood'</code>. In lieu of a metric string, this method also accepts (str, params: dict) tuples; the first element of this tuple is the metric string, and the second is a dict of associated params. At present, this dict only expects one key, <code>'average'</code>, which stipulates the type of averaging to perform on those metrics that permit binary averaging. Permissible options include: <code>None</code>, <code>'macro'</code> and <code>'micro'</code>.</li>
<li><b><code>data</code></b>: dict. Data to evaluate model with. It binds observed variables (of type <code>RandomVariable</code> or <code>tf.Tensor</code>) to their realizations (of type <code>tf.Tensor</code>). It can also bind placeholders (of type <code>tf.Tensor</code>) used in the model to their realizations.</li>
<li><b><code>n_samples</code></b>: int. Number of posterior samples for making predictions, using the posterior predictive distribution.</li>
<li><b><code>output_key</code></b>: RandomVariable or tf.Tensor. It is the key in <code>data</code> which corresponds to the model’s output.</li>
<li><b><code>seed</code></b>: a Python integer. Used to create a random seed for the distribution</li>
</ul>
<h4 id="returns">Returns:</h4>
<p>list of float or float. A list of evaluations or a single evaluation.</p>
<h4 id="raises">Raises:</h4>
<p>NotImplementedError. If an input metric does not match an implemented metric in Edward.</p>
<h4 id="examples">Examples</h4>
<pre class="python"><code># build posterior predictive after inference: it is
# parameterized by a posterior sample
x_post = ed.copy(x, {z: qz, beta: qbeta})

# log-likelihood performance
ed.evaluate(&#39;log_likelihood&#39;, data={x_post: x_train})

# classification accuracy
# here, `x_ph` is any features the model is defined with respect to,
# and `y_post` is the posterior predictive distribution
ed.evaluate(&#39;binary_accuracy&#39;, data={y_post: y_train, x_ph: x_train})

# mean squared error
ed.evaluate(&#39;mean_squared_error&#39;, data={y: y_data, x: x_data})</code></pre>
<h1 id="mean-squared-logarithmic-error-with-micro-averaging">mean squared logarithmic error with <code>'micro'</code> averaging</h1>
<p>ed.evaluate((‘mean_squared_logarithmic_error’, {‘average’: ‘micro’}), data={y: y_data, x: x_data})</p>
<div id="refs" class="references">
<div id="ref-winkler1994evaluating">
<p>Winkler, R. L. (1994). Evaluating probabilities: Asymmetric scoring rules. <em>Management Science</em>, <em>40</em>(11), 1395–1405.</p>
</div>
</div>
    </div>
  </div>
  <div class="row" style="padding-bottom: 25%"> </div>
</div>
<script>
  hljs.initHighlightingOnLoad();
  renderMathInElement(document.body);
</script>
</body>
</html>
